(base) C:\Users\Anton\PycharmProjects\Avito_Homeworks\test_issue_5>pytest -v
================================================= test session starts =================================================
platform win32 -- Python 3.9.12, pytest-7.2.0, pluggy-1.0.0 -- C:\Users\Anton\anaconda3\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\Anton\PycharmProjects\Avito_Homeworks\test_issue_5
plugins: anyio-3.5.0, cov-4.0.0
collected 3 items

test_issue_5.py::test_current_year_ymd_format FAILED                                                             [ 33%]
test_issue_5.py::test_prev_year_dmy_format FAILED                                                                [ 66%]
test_issue_5.py::test_prev_year_slash_format FAILED                                                              [100%]

====================================================== FAILURES =======================================================
____________________________________________ test_current_year_ymd_format _____________________________________________

    def test_current_year_ymd_format():
>       actual = what_is_year_now()

test_issue_5.py:28:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
what_is_year_now.py:23: in what_is_year_now
    with urllib.request.urlopen(API_URL) as resp:
..\..\..\anaconda3\lib\urllib\request.py:214: in urlopen
    return opener.open(url, data, timeout)
..\..\..\anaconda3\lib\urllib\request.py:523: in open
    response = meth(req, response)
..\..\..\anaconda3\lib\urllib\request.py:632: in http_response
    response = self.parent.error(
..\..\..\anaconda3\lib\urllib\request.py:561: in error
    return self._call_chain(*args)
..\..\..\anaconda3\lib\urllib\request.py:494: in _call_chain
    result = func(*args)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <urllib.request.HTTPDefaultErrorHandler object at 0x000002782FBC0FD0>
req = <urllib.request.Request object at 0x000002782FBC0E80>
fp = <http.client.HTTPResponse object at 0x000002782FBE3430>, code = 503, msg = 'Service Unavailable'
hdrs = <http.client.HTTPMessage object at 0x000002782FBE3E80>

    def http_error_default(self, req, fp, code, msg, hdrs):
>       raise HTTPError(req.full_url, code, msg, hdrs, fp)
E       urllib.error.HTTPError: HTTP Error 503: Service Unavailable

..\..\..\anaconda3\lib\urllib\request.py:641: HTTPError
______________________________________________ test_prev_year_dmy_format ______________________________________________

    def test_prev_year_dmy_format():
        with patch.object(json, 'load', return_value=TEST_JSON_2022_DMY):
>           actual = what_is_year_now()

test_issue_5.py:35:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
what_is_year_now.py:23: in what_is_year_now
    with urllib.request.urlopen(API_URL) as resp:
..\..\..\anaconda3\lib\urllib\request.py:214: in urlopen
    return opener.open(url, data, timeout)
..\..\..\anaconda3\lib\urllib\request.py:523: in open
    response = meth(req, response)
..\..\..\anaconda3\lib\urllib\request.py:632: in http_response
    response = self.parent.error(
..\..\..\anaconda3\lib\urllib\request.py:561: in error
    return self._call_chain(*args)
..\..\..\anaconda3\lib\urllib\request.py:494: in _call_chain
    result = func(*args)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <urllib.request.HTTPDefaultErrorHandler object at 0x000002782FBC0FD0>
req = <urllib.request.Request object at 0x000002782FC2CD30>
fp = <http.client.HTTPResponse object at 0x000002782FC2CA30>, code = 503, msg = 'Service Unavailable'
hdrs = <http.client.HTTPMessage object at 0x000002782FC2CBE0>

    def http_error_default(self, req, fp, code, msg, hdrs):
>       raise HTTPError(req.full_url, code, msg, hdrs, fp)
E       urllib.error.HTTPError: HTTP Error 503: Service Unavailable

..\..\..\anaconda3\lib\urllib\request.py:641: HTTPError
_____________________________________________ test_prev_year_slash_format _____________________________________________

    def test_prev_year_slash_format():
        with patch.object(json, 'load', return_value=TEST_JSON_2022_SLASH_FORMAT):
            with pytest.raises(ValueError):
>               what_is_year_now()

test_issue_5.py:43:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
what_is_year_now.py:23: in what_is_year_now
    with urllib.request.urlopen(API_URL) as resp:
..\..\..\anaconda3\lib\urllib\request.py:214: in urlopen
    return opener.open(url, data, timeout)
..\..\..\anaconda3\lib\urllib\request.py:523: in open
    response = meth(req, response)
..\..\..\anaconda3\lib\urllib\request.py:632: in http_response
    response = self.parent.error(
..\..\..\anaconda3\lib\urllib\request.py:561: in error
    return self._call_chain(*args)
..\..\..\anaconda3\lib\urllib\request.py:494: in _call_chain
    result = func(*args)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <urllib.request.HTTPDefaultErrorHandler object at 0x000002782FBC0FD0>
req = <urllib.request.Request object at 0x00000278305A7850>
fp = <http.client.HTTPResponse object at 0x00000278305A7760>, code = 503, msg = 'Service Unavailable'
hdrs = <http.client.HTTPMessage object at 0x00000278305A7610>

    def http_error_default(self, req, fp, code, msg, hdrs):
>       raise HTTPError(req.full_url, code, msg, hdrs, fp)
E       urllib.error.HTTPError: HTTP Error 503: Service Unavailable

..\..\..\anaconda3\lib\urllib\request.py:641: HTTPError
=============================================== short test summary info ===============================================
FAILED test_issue_5.py::test_current_year_ymd_format - urllib.error.HTTPError: HTTP Error 503: Service Unavailable
FAILED test_issue_5.py::test_prev_year_dmy_format - urllib.error.HTTPError: HTTP Error 503: Service Unavailable
FAILED test_issue_5.py::test_prev_year_slash_format - urllib.error.HTTPError: HTTP Error 503: Service Unavailable
================================================= 3 failed in 20.34s ==================================================

(base) C:\Users\Anton\PycharmProjects\Avito_Homeworks\test_issue_5>pytest -v --cov
================================================= test session starts =================================================
platform win32 -- Python 3.9.12, pytest-7.2.0, pluggy-1.0.0 -- C:\Users\Anton\anaconda3\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\Anton\PycharmProjects\Avito_Homeworks\test_issue_5
plugins: anyio-3.5.0, cov-4.0.0
collected 3 items

test_issue_5.py::test_current_year_ymd_format PASSED                                                             [ 33%]
test_issue_5.py::test_prev_year_dmy_format PASSED                                                                [ 66%]
test_issue_5.py::test_prev_year_slash_format FAILED                                                              [100%]

====================================================== FAILURES =======================================================
_____________________________________________ test_prev_year_slash_format _____________________________________________

    def test_prev_year_slash_format():
        with patch.object(json, 'load', return_value=TEST_JSON_2022_SLASH_FORMAT):
            with pytest.raises(ValueError):
>               what_is_year_now()

test_issue_5.py:43:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
what_is_year_now.py:23: in what_is_year_now
    with urllib.request.urlopen(API_URL) as resp:
..\..\..\anaconda3\lib\urllib\request.py:214: in urlopen
    return opener.open(url, data, timeout)
..\..\..\anaconda3\lib\urllib\request.py:523: in open
    response = meth(req, response)
..\..\..\anaconda3\lib\urllib\request.py:632: in http_response
    response = self.parent.error(
..\..\..\anaconda3\lib\urllib\request.py:561: in error
    return self._call_chain(*args)
..\..\..\anaconda3\lib\urllib\request.py:494: in _call_chain
    result = func(*args)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <urllib.request.HTTPDefaultErrorHandler object at 0x00000281CEC6A610>
req = <urllib.request.Request object at 0x00000281CECAC640>
fp = <http.client.HTTPResponse object at 0x00000281CECAC730>, code = 503, msg = 'Service Unavailable'
hdrs = <http.client.HTTPMessage object at 0x00000281CECAC8E0>

    def http_error_default(self, req, fp, code, msg, hdrs):
>       raise HTTPError(req.full_url, code, msg, hdrs, fp)
E       urllib.error.HTTPError: HTTP Error 503: Service Unavailable

..\..\..\anaconda3\lib\urllib\request.py:641: HTTPError

---------- coverage: platform win32, python 3.9.12-final-0 -----------
Name                  Stmts   Miss  Cover
-----------------------------------------
test_issue_5.py          19      0   100%
what_is_year_now.py      24      5    79%
-----------------------------------------
TOTAL                    43      5    88%

=============================================== short test summary info ===============================================
FAILED test_issue_5.py::test_prev_year_slash_format - urllib.error.HTTPError: HTTP Error 503: Service Unavailable
======================================= 1 failed, 2 passed in 93.84s (0:01:33) ========================================
